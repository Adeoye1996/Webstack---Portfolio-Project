{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';// Replaced useHistory with useNavigate\nimport axios from'axios';import{Container,TextField,Button,Typography,Box,Grid}from'@mui/material';import'./Login.css';// Assuming some CSS styling\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const Login=_ref=>{let{userRole}=_ref;const[credentials,setCredentials]=useState({username:'',password:''});const[error,setError]=useState('');const navigate=useNavigate();// Replaced useHistory with useNavigate\n// Dummy credentials for testing login\nconst dummyCredentials={Parent:{username:'parent123',password:'password123'},Staff:{username:'staff123',password:'password123'},Admin:{username:'admin123',password:'password123'}};// Handle Input Changes\nconst handleChange=e=>{const{name,value}=e.target;setCredentials({...credentials,[name]:value});};// Handle Form Submission\nconst handleSubmit=async e=>{e.preventDefault();// Validation to check if fields are empty\nif(!credentials.username||!credentials.password){setError('Both fields are required!');return;}try{// Perform login via backend\nconst response=await axios.post('http://localhost:5000/api/auth/login',{username:credentials.username,password:credentials.password,role:userRole// Pass the user role here\n});// Check if the response contains a token\nif(response.data.token){const{role}=response.data.user;// Assuming the response contains user info\nif(role==='parent')navigate('/parent-dashboard');if(role==='staff')navigate('/staff-dashboard');if(role==='admin')navigate('/admin-dashboard');}}catch(err){// Dummy login check for testing without backend\nif(credentials.username===dummyCredentials[userRole].username&&credentials.password===dummyCredentials[userRole].password){setError('');alert(`${userRole} Login Successful!`);navigate(`/${userRole.toLowerCase()}-dashboard`);// Redirect to the respective dashboard\n}else{setError('Invalid username or password');}}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-page\",children:/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsxs(Box,{className:\"login-container\",boxShadow:3,p:3,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,children:[userRole,\" Login\"]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{label:\"Username\",variant:\"outlined\",fullWidth:true,name:\"username\",value:credentials.username,onChange:handleChange})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{label:\"Password\",type:\"password\",variant:\"outlined\",fullWidth:true,name:\"password\",value:credentials.password,onChange:handleChange})}),error&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",fullWidth:true,children:\"Login\"})})]})})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","axios","Container","TextField","Button","Typography","Box","Grid","jsxs","_jsxs","jsx","_jsx","Login","_ref","userRole","credentials","setCredentials","username","password","error","setError","navigate","dummyCredentials","Parent","Staff","Admin","handleChange","e","name","value","target","handleSubmit","preventDefault","response","post","role","data","token","user","err","alert","toLowerCase","className","children","maxWidth","boxShadow","p","variant","align","gutterBottom","onSubmit","container","spacing","item","xs","label","fullWidth","onChange","type","color"],"sources":["C:/Users/user/Webstack---Portfolio-Project/school-website/client/src/pages/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Replaced useHistory with useNavigate\nimport axios from 'axios';\nimport { Container, TextField, Button, Typography, Box, Grid } from '@mui/material';\nimport './Login.css'; // Assuming some CSS styling\n\nconst Login = ({ userRole }) => {\n  const [credentials, setCredentials] = useState({ username: '', password: '' });\n  const [error, setError] = useState('');\n  const navigate = useNavigate(); // Replaced useHistory with useNavigate\n\n  // Dummy credentials for testing login\n  const dummyCredentials = {\n    Parent: { username: 'parent123', password: 'password123' },\n    Staff: { username: 'staff123', password: 'password123' },\n    Admin: { username: 'admin123', password: 'password123' }\n  };\n\n  // Handle Input Changes\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setCredentials({ ...credentials, [name]: value });\n  };\n\n  // Handle Form Submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // Validation to check if fields are empty\n    if (!credentials.username || !credentials.password) {\n      setError('Both fields are required!');\n      return;\n    }\n\n    try {\n      // Perform login via backend\n      const response = await axios.post('http://localhost:5000/api/auth/login', {\n        username: credentials.username,\n        password: credentials.password,\n        role: userRole // Pass the user role here\n      });\n\n      // Check if the response contains a token\n      if (response.data.token) {\n        const { role } = response.data.user; // Assuming the response contains user info\n        if (role === 'parent') navigate('/parent-dashboard');\n        if (role === 'staff') navigate('/staff-dashboard');\n        if (role === 'admin') navigate('/admin-dashboard');\n      }\n    } catch (err) {\n      // Dummy login check for testing without backend\n      if (\n        credentials.username === dummyCredentials[userRole].username &&\n        credentials.password === dummyCredentials[userRole].password\n      ) {\n        setError('');\n        alert(`${userRole} Login Successful!`);\n        navigate(`/${userRole.toLowerCase()}-dashboard`); // Redirect to the respective dashboard\n      } else {\n        setError('Invalid username or password');\n      }\n    }\n  };\n\n  return (\n    <div className=\"login-page\">\n      <Container maxWidth=\"sm\">\n        <Box className=\"login-container\" boxShadow={3} p={3}>\n          <Typography variant=\"h4\" align=\"center\" gutterBottom>\n            {userRole} Login\n          </Typography>\n          <form onSubmit={handleSubmit}>\n            <Grid container spacing={3}>\n              {/* Username Field */}\n              <Grid item xs={12}>\n                <TextField\n                  label=\"Username\"\n                  variant=\"outlined\"\n                  fullWidth\n                  name=\"username\"\n                  value={credentials.username}\n                  onChange={handleChange}\n                />\n              </Grid>\n\n              {/* Password Field */}\n              <Grid item xs={12}>\n                <TextField\n                  label=\"Password\"\n                  type=\"password\"\n                  variant=\"outlined\"\n                  fullWidth\n                  name=\"password\"\n                  value={credentials.password}\n                  onChange={handleChange}\n                />\n              </Grid>\n\n              {/* Error Message */}\n              {error && (\n                <Grid item xs={12}>\n                  <Typography color=\"error\">{error}</Typography>\n                </Grid>\n              )}\n\n              {/* Submit Button */}\n              <Grid item xs={12}>\n                <Button variant=\"contained\" color=\"primary\" type=\"submit\" fullWidth>\n                  Login\n                </Button>\n              </Grid>\n            </Grid>\n          </form>\n        </Box>\n      </Container>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}